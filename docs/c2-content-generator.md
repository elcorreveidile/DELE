# Generador de Contenido Original - DELE C2

## Visión General

Este documento describe el sistema de generación de contenido original para el curso DELE C2, asegurando que todos los materiales cumplan con las especificaciones del Instituto Cervantes sin infringir derechos de autor.

**Principio fundamental**: Todo el contenido debe ser **original y creado específicamente para este curso**, siguiendo las especificaciones oficiales pero sin copiar materiales del Instituto Cervantes.

---

## Inventario de Contenido Necesario

### Resumen Cuantitativo

| Tipo de contenido | Cantidad | Especificaciones |
|-------------------|----------|------------------|
| **Textos escritos** | 44,000-78,000 palabras | 150+ textos de 300-600 palabras |
| **Audios** | 3.5-4.5 horas | 50-60 audios de 2-6 minutos |
| **Gráficos/Infografías** | 32-40 unidades | PNG/SVG, datos originales |
| **Escenarios de interacción** | 30-40 | Para P3 T2 y T3 |
| **Instrucciones de tareas** | 100+ | Consignas originales |

### Desglose por Módulo

#### **Módulo 1: Léxico y estructuras (P1: T1, T2, T3)**
- **20 textos** de 300-400 palabras con huecos
- Géneros: periodístico, ensayístico, literario
- Ámbitos: público, educativo, profesional
- **Necesidad**: 6,000-8,000 palabras de texto base
- **Ítems**: 12 (T1) + 10 (T2) + 6 (T3) = 28 ítems por texto

#### **Módulo 2: Comprensión auditiva (P1: T4, T5, T6, T7)**
- **24 audios** de 2-4 minutos cada uno
- Géneros: entrevista, conferencia, conversación, debate
- Variedades: mínimo 3 (peninsular, mexicano, argentino, colombiano, etc.)
- **Necesidad**: 48-96 minutos de audio (0.8-1.6 horas)
- **Transcripciones**: ~19,000 palabras (200 palabras/minuto)

#### **Módulo 3: Mediación escrita multimodal (P2: T1)**
- **10 conjuntos de fuentes** (30 textos + 15 gráficos)
  - Cada conjunto: 3 fuentes (2 textos + 1 gráfico o 1 texto + 2 gráficos)
  - Textos: 400-600 palabras cada uno
  - Gráficos: infografías, tablas, diagramas
- **Necesidad**: 12,000-18,000 palabras + 15 gráficos
- **Temas**: educación, tecnología, medio ambiente, sociedad, cultura

#### **Módulo 4: Expresión escrita formal (P2: T2, T3)**
- **20 consignas originales** (10 por tarea)
  - T2: carta formal, ensayo, artículo opinión
  - T3: informe, reseña, ensayo académico
- **Materiales de apoyo**: textos breves (150-200 palabras) como input
- **Necesidad**: 3,000-4,000 palabras en materiales de apoyo

#### **Módulo 5: Mediación oral (P3: T1)**
- **12 conjuntos de fuentes** (24 textos + 12 gráficos)
  - Cada conjunto: 2 textos + 1 gráfico
  - Textos: 300-400 palabras cada uno
- **Necesidad**: 7,200-9,600 palabras + 12 gráficos

#### **Módulo 6: Interacción: entrevista (P3: T2)**
- **15 tarjetas de conversación**
  - Temas: biografía profesional, experiencias, opiniones, proyectos
  - Preguntas de seguimiento (5-7 por tarjeta)
- **Necesidad**: 1,500-2,000 palabras en instrucciones

#### **Módulo 7: Negociación y acuerdo (P3: T3)**
- **15 escenarios de negociación**
  - Contextos: profesional, académico, comunitario
  - Roles definidos con intereses contrapuestos
  - Información para cada rol (150-200 palabras)
- **Necesidad**: 4,500-6,000 palabras

#### **Módulo 8: Simulacros parciales**
- **6 simulacros parciales** (2 por cada prueba)
- Reutilización estratégica de contenido de módulos anteriores
- **Contenido nuevo**: 20% adicional para variación

#### **Módulo 9: Simulacros completos**
- **4 simulacros completos**
- Contenido mayormente reutilizado
- **Contenido nuevo**: 10% adicional

---

## Especificaciones por Tipo de Contenido

### 1. Textos Escritos

#### A. Características obligatorias

**Nivel de complejidad C2:**
- Vocabulario especializado y académico
- Estructuras sintácticas complejas (subordinadas múltiples, pasivas, condicionales compuestos)
- Conectores sofisticados (no obstante, en virtud de, a tenor de, por ende)
- Registro formal o académico predominante
- Matices semánticos sutiles

**Variedades del español:**
- **Mínimo 3 variedades** en cada módulo
- Distribución sugerida: 40% peninsular, 25% mexicano, 20% argentino, 15% otras (colombiano, chileno, peruano)
- Marcas dialectales auténticas pero comprensibles

**Géneros textuales:**

| Género | Extensión típica | Características |
|--------|------------------|-----------------|
| Artículo periodístico | 400-600 palabras | Titular, entradilla, desarrollo, citas |
| Ensayo académico | 500-700 palabras | Tesis, argumentación, contraargumentos, conclusión |
| Fragmento literario | 300-500 palabras | Narrativo o descriptivo, estilo cuidado |
| Informe técnico | 400-600 palabras | Estructura formal, datos, recomendaciones |
| Carta formal/institucional | 250-400 palabras | Encabezado, desarrollo, despedida formal |
| Reseña crítica | 350-500 palabras | Descripción, análisis, valoración |

#### B. Temas por ámbito

**Ámbito público:**
- Políticas públicas y gobernanza
- Medio ambiente y sostenibilidad
- Urbanismo y movilidad
- Derechos ciudadanos
- Participación democrática

**Ámbito educativo:**
- Innovación pedagógica
- Tecnología en educación
- Educación superior y investigación
- Aprendizaje de idiomas
- Competencias del siglo XXI

**Ámbito profesional:**
- Transformación digital
- Gestión de equipos multiculturales
- Ética empresarial
- Economía circular
- Teletrabajo y nuevas formas laborales

**Ámbito personal (limitado en C2):**
- Desarrollo personal y profesional
- Conciliación vida-trabajo
- Salud mental en contextos exigentes

#### C. Proceso de creación

**Paso 1: Planificación**
```markdown
**Ficha de texto**
- Tipo: [Artículo periodístico / Ensayo / etc.]
- Tema: [Tema específico]
- Ámbito: [Público / Educativo / Profesional]
- Variedad: [Peninsular / Mexicano / etc.]
- Extensión objetivo: [300-600 palabras]
- Tarea DELE: [P1_T1 / P2_T1 / etc.]
- Puntos clave léxicos: [Lista de 10-15 términos C2 a incluir]
- Estructuras gramaticales objetivo: [Ej: subjuntivo imperfecto, pasivas reflejas]
```

**Paso 2: Generación asistida por IA**

Prompt para Claude/GPT:
```
Actúa como redactor experto en español nivel C2 (MCER).

Escribe un [GÉNERO] de [EXTENSIÓN] palabras sobre [TEMA] en español [VARIEDAD].

Requisitos obligatorios:
1. Nivel C2: vocabulario sofisticado, estructuras complejas
2. Incluir estos términos C2: [LISTA]
3. Usar estas estructuras: [LISTA]
4. Registro: [formal/académico/técnico]
5. Variedad dialectal: [VARIEDAD] (usar vocabulario y construcciones características)
6. Género: [CARACTERÍSTICAS DEL GÉNERO]

Estructura:
[ESTRUCTURA ESPECÍFICA DEL GÉNERO]

Tono: [objetivo/crítico/analítico/etc.]

No uses referencias a eventos posteriores a 2023 ni menciones organizaciones reales sin estar seguro de su existencia.
```

**Paso 3: Revisión humana**

Checklist de revisión:
- [ ] Extensión dentro del rango objetivo (±10%)
- [ ] Nivel léxico apropiado (min. 15% vocabulario C2)
- [ ] Estructuras gramaticales complejas presentes
- [ ] Coherencia y cohesión impecables
- [ ] Variedad dialectal auténtica
- [ ] Sin errores gramaticales o tipográficos
- [ ] Contenido cultural apropiado y no ofensivo
- [ ] Sin plagio (verificar con Turnitin o similar)
- [ ] Cumple especificaciones del género

**Paso 4: Adaptación para tareas**

Para P1 (Comprensión lectora con huecos):
```typescript
// Script: generateClozeTest.ts

function adaptTextForCloze(text: string, taskType: 'P1_T1' | 'P1_T2' | 'P1_T3'): ClozeTest {
  const itemsCount = taskType === 'P1_T1' ? 12 : taskType === 'P1_T2' ? 10 : 6;

  // Identificar palabras objetivo según tipo de tarea
  const targets = identifyTargetWords(text, taskType);

  // Seleccionar las mejores ubicaciones para huecos
  const gaps = selectOptimalGaps(targets, itemsCount);

  // Generar distractores
  const items = gaps.map(gap => generateDistractors(gap, taskType));

  return {
    text: createTextWithGaps(text, gaps),
    items,
    correctAnswers: gaps.map(g => g.correctAnswer)
  };
}

function identifyTargetWords(text: string, taskType: string): TargetWord[] {
  switch(taskType) {
    case 'P1_T1': // Léxico con distinciones sutiles
      return findSubtleLexicalDistinctions(text);
    case 'P1_T2': // Estructuras complejas
      return findComplexStructures(text);
    case 'P1_T3': // Cohesión y coherencia
      return findConnectors(text);
  }
}
```

### 2. Audios

#### A. Características obligatorias

**Calidad técnica:**
- Formato: MP3 (128 kbps mínimo) o WAV
- Sin ruido de fondo ni distorsiones
- Volumen normalizado (-16 LUFS)
- Duración: 2-6 minutos según tarea

**Características lingüísticas:**
- Velocidad: 140-180 palabras/minuto (natural para C2)
- Pronunciación clara pero natural (no exagerada)
- Variedades del español: mínimo 3 en cada módulo
- Acentos auténticos de hablantes nativos

**Géneros de audio:**

| Género | Duración | Características |
|--------|----------|-----------------|
| Entrevista | 3-4 min | 2 hablantes, preguntas y respuestas, tema profesional/académico |
| Conferencia | 4-5 min | 1 hablante, exposición formal, tema especializado |
| Conversación | 2-3 min | 2-3 hablantes, interacción natural, tema cotidiano elevado |
| Debate | 4-6 min | 3-4 hablantes, argumentación, turnos de palabra |
| Noticia/Reportaje | 2-3 min | 1-2 hablantes, estilo informativo |
| Podcast/Tertulia | 4-5 min | 2-3 hablantes, tono conversacional |

#### B. Proceso de creación

**Paso 1: Escritura del guion**

```markdown
**Ficha de audio**
- Tipo: [Entrevista / Conferencia / etc.]
- Tema: [Tema específico]
- Variedad: [Peninsular / Mexicano / etc.]
- Duración objetivo: [2-6 minutos]
- Tarea DELE: [P1_T4 / P1_T5 / etc.]
- Hablantes: [Cantidad y perfil]
- Vocabulario C2 clave: [15-20 términos]
```

Prompt para generar guion:
```
Escribe un guion para un [GÉNERO] de [DURACIÓN] minutos en español [VARIEDAD] sobre [TEMA].

Formato del guion:
HABLANTE 1 (nombre, rol): [Texto]
HABLANTE 2 (nombre, rol): [Texto]

Requisitos:
1. Nivel C2: vocabulario especializado, estructuras complejas
2. Incluir: [TÉRMINOS C2]
3. Velocidad: 160 palabras/minuto aprox
4. Duración: [X] minutos = [Y] palabras total
5. Variedad: [VARIEDAD] (usar expresiones características)
6. Naturalidad: pausas, interrupciones leves, marcadores conversacionales

Contenido:
[ESTRUCTURA Y PUNTOS CLAVE A CUBRIR]

Evita referencias culturales muy específicas que puedan resultar oscuras.
```

**Paso 2: Revisión del guion**

Checklist:
- [ ] Extensión correcta (±50 palabras del objetivo)
- [ ] Vocabulario C2 bien integrado
- [ ] Diálogos naturales (no artificiales)
- [ ] Variedad dialectal auténtica
- [ ] Sin errores gramaticales
- [ ] Información factualmente correcta
- [ ] Contenido apropiado para evaluación

**Paso 3: Grabación**

**Opciones de grabación:**

1. **Actores de voz humanos** (recomendado):
   - Contratar locutores nativos de cada variedad
   - Plataformas: Voices.com, Fiverr, Upwork
   - Especificar: variedad dialectal, perfil de voz, experiencia
   - Enviar guion con instrucciones de tono y ritmo
   - Coste: $50-150 por audio de 3-4 minutos

2. **Text-to-Speech (alternativa temporal)**:
   - Servicios: ElevenLabs, Google Cloud TTS, Amazon Polly
   - Ventaja: rápido y económico
   - Desventaja: menos natural, variedades limitadas
   - **Uso recomendado**: solo para prototipos o práctica no oficial

**Instrucciones de grabación:**
```markdown
# Instrucciones para locutor

**Proyecto**: DELE C2 - [Título del audio]
**Variedad**: [Peninsular / Mexicano / Argentino / etc.]
**Duración**: [X] minutos
**Tono**: [formal / conversacional / académico]
**Velocidad**: Natural (140-180 palabras/minuto)

**Guion adjunto**: [Archivo]

**Indicaciones especiales**:
- Pronunciación: Clara pero natural (no exagerada ni didáctica)
- Énfasis: Marcar énfasis naturales en palabras clave
- Pausas: Respetar pausas indicadas en el guion
- Variedad dialectal: Usar pronunciación y entonación auténtica de [VARIEDAD]

**Ejemplos de pronunciación clave**:
- [Palabras específicas si es necesario aclarar]

**Formato de entrega**:
- Archivo: WAV 44.1kHz, 16-bit, mono o estéreo
- Nombre: [codigo-audio].wav
- Sin música de fondo ni efectos (excepto si se especifica)

**Revisiones**: Incluidas hasta 2 revisiones menores
```

**Paso 4: Post-producción**

```bash
# Script de post-producción con ffmpeg

# 1. Normalizar volumen
ffmpeg -i input.wav -af loudnorm=I=-16:TP=-1.5:LRA=11 -ar 44100 output-normalized.wav

# 2. Reducir ruido de fondo (con filtro)
ffmpeg -i output-normalized.wav -af "highpass=f=80, lowpass=f=12000" output-cleaned.wav

# 3. Convertir a MP3 de calidad
ffmpeg -i output-cleaned.wav -codec:a libmp3lame -b:a 192k output-final.mp3

# 4. Generar transcripción con timestamps (usando Whisper)
whisper output-final.mp3 --model medium --language es --output_format srt
```

**Paso 5: Validación**

Checklist:
- [ ] Duración dentro del rango objetivo (±15 segundos)
- [ ] Calidad de audio: sin ruido, volumen adecuado
- [ ] Pronunciación clara y natural
- [ ] Variedad dialectal auténtica
- [ ] Velocidad apropiada (verificar con transcripción)
- [ ] Contenido coincide con guion
- [ ] Transcripción SRT precisa

### 3. Gráficos e Infografías

#### A. Tipos de gráficos necesarios

| Tipo | Cantidad | Uso principal |
|------|----------|---------------|
| Infografías temáticas | 15-20 | P2 T1, P3 T1 (mediación) |
| Gráficos de datos (barras, líneas, circular) | 8-10 | P2 T1 (mediación multimodal) |
| Tablas comparativas | 4-6 | P2 T1, P3 T1 |
| Diagramas (flujo, Venn, organigrama) | 3-5 | P2 T1, P3 T1 |
| Mapas conceptuales | 2-3 | P3 T1 (exposición) |

#### B. Especificaciones técnicas

**Formato:**
- Archivo: PNG (alta resolución) o SVG (vectorial)
- Resolución: 1920x1080 px mínimo
- DPI: 300 para impresión, 150 para digital
- Tamaño de archivo: <500 KB (PNG optimizado)

**Diseño:**
- Estilo: Minimalista, profesional
- Colores: Paleta de 3-5 colores (accesible para daltónicos)
- Tipografía: Sans-serif legible (Roboto, Open Sans, Inter)
- Tamaño de fuente: 14pt mínimo para texto, 20pt para títulos

**Contenido:**
- Título descriptivo
- Leyenda si es necesario
- Fuente de datos (ficticia pero creíble): "Elaboración propia basada en..."
- Etiquetas en español claro
- Datos: realistas pero no reales (evitar plagiar gráficos existentes)

#### C. Proceso de creación

**Paso 1: Planificación**

```markdown
**Ficha de gráfico**
- Tipo: [Infografía / Gráfico de barras / Tabla / etc.]
- Tema: [Tema específico]
- Uso: [P2 T1 sobre educación / P3 T1 sobre sostenibilidad / etc.]
- Datos a representar: [Descripción]
- Mensaje clave: [Qué debe comunicar el gráfico]
```

**Paso 2: Generación de datos**

Para gráficos de datos, crear dataset ficticio pero realista:

```python
# generate_dataset.py
import pandas as pd
import numpy as np

def generate_education_data():
    """Genera datos ficticios sobre uso de tecnología en educación"""
    years = list(range(2015, 2024))
    countries = ['España', 'México', 'Argentina', 'Chile', 'Colombia']

    data = []
    for country in countries:
        base_value = np.random.randint(40, 70)
        values = [base_value + (year - 2015) * np.random.randint(2, 5) for year in years]
        for year, value in zip(years, values):
            data.append({'País': country, 'Año': year, 'Porcentaje': min(value, 95)})

    df = pd.DataFrame(data)
    df.to_csv('education_tech_data.csv', index=False)
    return df

# Genera datos
generate_education_data()
```

**Paso 3: Creación visual**

**Herramientas recomendadas:**

1. **Para infografías**: Canva, Figma, Adobe Illustrator
2. **Para gráficos de datos**: Python (matplotlib/seaborn), R (ggplot2), Flourish
3. **Para diagramas**: Draw.io, Lucidchart, Miro

**Ejemplo con Python (matplotlib):**

```python
import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns

# Configurar estilo
sns.set_style("whitegrid")
plt.rcParams['font.family'] = 'sans-serif'
plt.rcParams['font.sans-serif'] = ['Roboto', 'Arial']

# Cargar datos
df = pd.read_csv('education_tech_data.csv')

# Crear gráfico
fig, ax = plt.subplots(figsize=(12, 7))

for country in df['País'].unique():
    country_data = df[df['País'] == country]
    ax.plot(country_data['Año'], country_data['Porcentaje'],
            marker='o', linewidth=2, label=country)

ax.set_xlabel('Año', fontsize=14, fontweight='bold')
ax.set_ylabel('Porcentaje de centros con tecnología (%)', fontsize=14, fontweight='bold')
ax.set_title('Adopción de Tecnología en Centros Educativos (2015-2023)',
             fontsize=16, fontweight='bold', pad=20)
ax.legend(title='País', fontsize=12, title_fontsize=12)
ax.grid(True, alpha=0.3)

# Añadir nota al pie
plt.figtext(0.5, 0.01, 'Fuente: Elaboración propia basada en datos de estudios educativos',
            ha='center', fontsize=10, style='italic')

plt.tight_layout()
plt.savefig('grafico-tecnologia-educacion.png', dpi=300, bbox_inches='tight')
```

**Paso 4: Revisión**

Checklist:
- [ ] Resolución adecuada (1920x1080 mínimo)
- [ ] Texto legible (tamaño de fuente ≥ 14pt)
- [ ] Colores accesibles (contraste suficiente)
- [ ] Título descriptivo presente
- [ ] Leyenda clara si es necesario
- [ ] Datos realistas (sin valores imposibles)
- [ ] Fuente indicada
- [ ] Sin errores ortográficos
- [ ] Diseño profesional y limpio

### 4. Escenarios de Interacción Oral (P3 T2, T3)

#### A. Tarjetas de conversación (P3 T2)

**Estructura:**
```markdown
# Tarjeta de Conversación C2 - [Número]

## Tema: [Tema general]

### Contexto
[Breve descripción del contexto: "Usted es un profesional que..."]

### Puntos a tratar
1. [Punto 1: Biografía/Experiencia]
2. [Punto 2: Opinión/Valoración]
3. [Punto 3: Planes/Proyectos]
4. [Punto 4: Análisis/Reflexión]

### Preguntas de seguimiento (para el evaluador)
- [Pregunta profundización 1]
- [Pregunta profundización 2]
- [Pregunta profundización 3]
- [Pregunta de contraste: "¿Cómo compara esto con...?"]
- [Pregunta hipotética: "¿Qué habría ocurrido si...?"]
```

**Ejemplo:**
```markdown
# Tarjeta de Conversación C2 - 03

## Tema: Innovación en el ámbito laboral

### Contexto
Usted trabaja en una empresa que está implementando un programa de innovación abierta, donde los empleados pueden proponer y desarrollar proyectos propios durante el 20% de su jornada laboral.

### Puntos a tratar
1. Describa su experiencia con programas de innovación en entornos laborales
2. Analice las ventajas y desafíos de este tipo de iniciativas
3. Explique qué tipo de proyecto le gustaría desarrollar en este contexto
4. Valore el impacto de la innovación en la satisfacción laboral y la productividad

### Preguntas de seguimiento
- ¿Cómo se podría medir el éxito de un programa de este tipo?
- ¿Qué riesgos organizativos podrían surgir?
- ¿Cómo compara este modelo con otras formas de fomentar la creatividad en el trabajo?
- ¿Qué habría ocurrido en su trayectoria profesional si hubiera tenido acceso a este tipo de programa?
- ¿Cree que este modelo es viable en todos los sectores? ¿Por qué?
```

#### B. Escenarios de negociación (P3 T3)

**Estructura:**
```markdown
# Escenario de Negociación C2 - [Número]

## Situación general
[Descripción del contexto compartido: 200-300 palabras]

---

## ROL A: [Título del rol]

### Su situación
[Descripción específica del rol: 150-200 palabras]

### Sus objetivos
- **Objetivo principal**: [Objetivo prioritario]
- **Objetivos secundarios**:
  - [Objetivo 2]
  - [Objetivo 3]

### Su posición
- [Punto de vista/Interés 1]
- [Punto de vista/Interés 2]
- [Punto de vista/Interés 3]

### Información adicional
[Datos relevantes solo para este rol: 100 palabras]

### Limitaciones
- [Limitación o restricción 1]
- [Limitación o restricción 2]

---

## ROL B: [Título del rol]

[Misma estructura que ROL A, con intereses contrapuestos o complementarios]
```

**Ejemplo:**
```markdown
# Escenario de Negociación C2 - 07

## Situación general

El Ayuntamiento de una ciudad mediana (250,000 habitantes) ha decidido peatonalizar la calle principal del centro histórico, actualmente con tráfico permitido. La medida afectaría a comercios, residentes y tráfico. Se ha convocado una reunión entre la concejalía de movilidad y la asociación de comerciantes para negociar los términos de la peatonalización.

**Contexto**: La calle tiene 800 metros de longitud, 120 comercios, 200 residentes y recibe actualmente 15,000 vehículos diarios. El ayuntamiento tiene presupuesto para la remodelación y ha prometido compensaciones.

---

## ROL A: Concejal/a de Movilidad Sostenible

### Su situación
Usted representa al Ayuntamiento y tiene el mandato de peatonalizar la calle para mejorar la calidad del aire, reducir accidentes y potenciar el turismo. Su plan ha sido aprobado por el pleno con el voto de 15/21 concejales. Tiene presión de grupos ecologistas y vecinos que apoyan la medida. La peatonalización comenzaría en 6 meses.

### Sus objetivos
- **Objetivo principal**: Conseguir peatonalización completa en un plazo máximo de 9 meses
- **Objetivos secundarios**:
  - Minimizar compensaciones económicas directas
  - Mantener apoyo político (evitar conflicto público)
  - Implementar medidas complementarias (aparcamiento, transporte público)

### Su posición
- Estudios técnicos demuestran reducción de emisiones del 45% con la peatonalización
- 67% de ciudadanos en encuesta apoyan la medida
- Presupuesto de €2.5 millones para remodelación + €500,000 para compensaciones
- Dispuesto a flexibilizar horarios de carga/descarga y bonificar tasas

### Información adicional
- Tres calles paralelas pueden absorber el tráfico actual
- Proyecto de aparcamiento subterráneo en fase de licitación (entrega: 18 meses)
- Éxito de peatonalizaciones en ciudades similares (aumento comercial 15-30%)

### Limitaciones
- No puede retrasar más de 9 meses el inicio (compromiso electoral)
- Presupuesto de compensaciones limitado: €500,000
- No puede permitir tráfico excepto servicios y residentes (con restricciones)

---

## ROL B: Presidente/a Asociación de Comerciantes

### Su situación
Usted representa a 120 comercios de la calle, muchos de ellos negocios familiares con décadas de historia. Sus asociados temen pérdida de clientes que llegan en coche (40% de las ventas según estimaciones). Algunos comercios ya están en situación delicada tras la pandemia. Exige garantías y compensaciones.

### Sus objetivos
- **Objetivo principal**: Retrasar o modificar la peatonalización para minimizar impacto económico
- **Objetivos secundarios**:
  - Conseguir compensaciones económicas significativas
  - Mantener acceso de vehículos en horarios clave
  - Obtener mejoras de infraestructura (aparcamiento cercano)

### Su posición
- 78% de comerciantes se oponen a la peatonalización total
- Proponen peatonalización parcial (fines de semana y festivos) o con horarios de tráfico restringido
- Solicitan compensación por pérdida de ingresos durante obras (estimada: €1.2 millones)
- Exigen aparcamiento disuasorio terminado ANTES de peatonalizar

### Información adicional
- 15 comercios han amenazado con cerrar si se pierde acceso en coche
- Dispuesto a aceptar peatonalización si hay garantías reales (aparcamiento + compensaciones)
- Ejemplos de peatonalizaciones fallidas en ciudades cercanas (cierre de 30% comercios)

### Limitaciones
- No puede oponerse completamente (decisión política ya tomada)
- Asociación dividida: 60% firmemente opuestos, 40% abiertos a negociar
- Presión de algunos comercios para llegar a acuerdo (no solo bloquear)
```

---

## Sistema de Gestión de Contenido

### 1. Estructura de Repositorio

```
/content
├── /texts
│   ├── /p1-reading            # Textos para P1 T1-T3
│   │   ├── /periodisticos
│   │   ├── /ensayos
│   │   └── /literarios
│   ├── /p2-mediation          # Textos para P2 T1
│   │   └── /sets              # Conjuntos de fuentes
│   └── /p3-oral               # Textos para P3 T1
│       └── /sets
├── /audios
│   ├── /interviews
│   ├── /conferences
│   ├── /conversations
│   └── /debates
├── /graphics
│   ├── /infographics
│   ├── /charts
│   ├── /tables
│   └── /diagrams
├── /tasks
│   ├── /p1-exercises          # Ejercicios con huecos generados
│   ├── /p2-instructions       # Consignas de escritura
│   └── /p3-scenarios          # Tarjetas y escenarios
└── /metadata
    └── content-inventory.json # Inventario maestro
```

### 2. Metadata estándar

Cada pieza de contenido debe tener un archivo JSON con metadata:

```json
{
  "id": "text_c2_edu_001",
  "type": "text",
  "title": "La transformación digital en las aulas universitarias",
  "category": "education",
  "subcategory": "higher_education",
  "genre": "articulo_periodistico",
  "domain": "educativo",
  "level": "C2",
  "wordCount": 487,
  "spanishVariety": "peninsular",
  "keywords": [
    "educación superior",
    "tecnología",
    "innovación pedagógica",
    "competencias digitales"
  ],
  "deleTaskTypes": ["P1_T1", "P1_T3"],
  "lexicalC2Terms": [
    "ubicuidad",
    "paradigma",
    "hibridación",
    "sinergia"
  ],
  "grammarFeatures": [
    "oraciones_subordinadas_multiples",
    "pasiva_refleja",
    "perifrasis_verbales"
  ],
  "culturalReferences": ["Sistema universitario español", "Plan Bolonia"],
  "createdBy": "AI-assisted + human-reviewed",
  "createdDate": "2024-01-15",
  "reviewedBy": "Maria García",
  "reviewDate": "2024-01-16",
  "status": "approved",
  "filePath": "/content/texts/p1-reading/periodisticos/text_c2_edu_001.txt",
  "usageCount": 0,
  "lastUsed": null,
  "qualityScore": 9.2,
  "notes": "Excelente para T1 por riqueza léxica. Considerar para simulacro 1."
}
```

### 3. Base de datos de contenido

Integrar con el esquema Prisma:

```prisma
// Añadir al schema.prisma

model ContentPiece {
  id          String   @id @default(cuid())
  contentId   String   @unique // text_c2_edu_001
  type        ContentType
  title       String

  // Clasificación
  category    String
  subcategory String?
  genre       String
  domain      String
  level       Difficulty @default(C2)

  // Metadata lingüística
  wordCount       Int?
  durationSeconds Int?
  spanishVariety  String
  keywords        String[]
  lexicalC2Terms  String[]
  grammarFeatures String[]

  // Uso en tareas
  deleTaskTypes   C2TaskType[]
  usedInModules   String[]      // IDs de módulos

  // Gestión
  filePath      String
  fileUrl       String?
  thumbnailUrl  String?       // Para gráficos y videos

  // Control de calidad
  createdBy     String        // ID del creador o "AI-assisted"
  reviewedBy    String?       // ID del revisor humano
  status        ContentStatus @default(DRAFT)
  qualityScore  Float?

  // Estadísticas
  usageCount    Int         @default(0)
  lastUsed      DateTime?

  // Relaciones
  tasks         Task[]      // Tareas que usan este contenido

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([type, status])
  @@index([level, category])
  @@fulltext([title, keywords])
}

enum ContentType {
  TEXT
  AUDIO
  GRAPHIC
  VIDEO
  SCENARIO
  INSTRUCTION
}

enum ContentStatus {
  DRAFT
  IN_REVIEW
  APPROVED
  PUBLISHED
  ARCHIVED
}
```

### 4. API de gestión de contenido

```typescript
// app/api/content/route.ts

import { prisma } from '@/lib/prisma';
import { NextResponse } from 'next/server';

// GET: Buscar contenido por criterios
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);

  const type = searchParams.get('type');
  const category = searchParams.get('category');
  const taskType = searchParams.get('taskType');
  const status = searchParams.get('status') || 'APPROVED';

  const content = await prisma.contentPiece.findMany({
    where: {
      type: type as ContentType | undefined,
      category,
      deleTaskTypes: taskType ? { has: taskType as C2TaskType } : undefined,
      status: status as ContentStatus
    },
    orderBy: { usageCount: 'asc' } // Priorizar contenido menos usado
  });

  return NextResponse.json(content);
}

// POST: Crear nueva pieza de contenido
export async function POST(request: Request) {
  const body = await request.json();

  // Validar con Zod
  const validated = ContentPieceSchema.parse(body);

  const content = await prisma.contentPiece.create({
    data: validated
  });

  return NextResponse.json(content, { status: 201 });
}

// PATCH: Actualizar contenido
export async function PATCH(request: Request) {
  const body = await request.json();
  const { id, ...updates } = body;

  const content = await prisma.contentPiece.update({
    where: { id },
    data: updates
  });

  return NextResponse.json(content);
}
```

---

## Automatización del Proceso

### 1. Script de generación masiva

```typescript
// scripts/generate-content-batch.ts

import Anthropic from '@anthropic-ai/sdk';
import { prisma } from '../lib/prisma';
import * as fs from 'fs';
import * as path from 'path';

interface ContentRequest {
  type: 'text' | 'audio_script' | 'scenario';
  genre: string;
  theme: string;
  variety: string;
  taskType: C2TaskType;
  wordCount?: number;
  duration?: number;
}

const anthropic = new Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY
});

async function generateText(request: ContentRequest): Promise<string> {
  const prompt = `
Actúa como redactor experto en español nivel C2 (MCER).

Escribe un ${request.genre} de ${request.wordCount} palabras sobre "${request.theme}" en español ${request.variety}.

Requisitos obligatorios:
1. Nivel C2: vocabulario sofisticado (usar mín. 15 términos de nivel C2), estructuras complejas
2. Registro: formal o académico según género
3. Variedad dialectal: ${request.variety} (incluir vocabulario y construcciones características)
4. Para tarea DELE: ${request.taskType}

[CONTINÚA CON ESPECIFICACIONES DETALLADAS...]
`;

  const message = await anthropic.messages.create({
    model: 'claude-3-5-sonnet-20241022',
    max_tokens: 2000,
    messages: [{
      role: 'user',
      content: prompt
    }]
  });

  return message.content[0].type === 'text' ? message.content[0].text : '';
}

async function generateBatch(requests: ContentRequest[]): Promise<void> {
  for (const request of requests) {
    console.log(`Generando: ${request.genre} sobre ${request.theme} (${request.variety})...`);

    const content = await generateText(request);

    // Guardar en filesystem
    const filename = `${request.type}_${request.variety}_${Date.now()}.txt`;
    const filepath = path.join(__dirname, '../content/texts', filename);
    fs.writeFileSync(filepath, content);

    // Guardar metadata en BD
    await prisma.contentPiece.create({
      data: {
        contentId: filename.replace('.txt', ''),
        type: 'TEXT',
        title: `${request.genre} - ${request.theme}`,
        genre: request.genre,
        category: request.theme.split(' ')[0].toLowerCase(),
        domain: 'educativo',
        level: 'C2',
        wordCount: request.wordCount,
        spanishVariety: request.variety,
        deleTaskTypes: [request.taskType],
        filePath: filepath,
        createdBy: 'AI-assisted',
        status: 'IN_REVIEW'
      }
    });

    console.log(`✓ Generado y guardado: ${filename}`);

    // Pausa para evitar rate limiting
    await new Promise(resolve => setTimeout(resolve, 2000));
  }

  console.log(`\n✓ Batch completado: ${requests.length} piezas generadas`);
}

// Definir batch de contenido a generar
const batchRequests: ContentRequest[] = [
  {
    type: 'text',
    genre: 'artículo periodístico',
    theme: 'educación digital',
    variety: 'peninsular',
    taskType: 'P1_T1',
    wordCount: 450
  },
  {
    type: 'text',
    genre: 'ensayo académico',
    theme: 'sostenibilidad urbana',
    variety: 'mexicano',
    taskType: 'P1_T2',
    wordCount: 520
  },
  // ... más solicitudes
];

// Ejecutar
generateBatch(batchRequests)
  .then(() => console.log('Proceso completado'))
  .catch(console.error);
```

### 2. Pipeline de revisión

```typescript
// scripts/review-pipeline.ts

import { prisma } from '../lib/prisma';
import { analyzeText } from '../lib/text-analysis';

async function reviewContent(contentId: string): Promise<ReviewResult> {
  const content = await prisma.contentPiece.findUnique({
    where: { id: contentId }
  });

  if (!content) throw new Error('Content not found');

  // Leer archivo
  const text = fs.readFileSync(content.filePath, 'utf-8');

  // Análisis automático
  const analysis = await analyzeText(text, {
    level: 'C2',
    expectedWordCount: content.wordCount,
    variety: content.spanishVariety
  });

  // Verificaciones
  const issues: string[] = [];

  if (analysis.wordCount < content.wordCount! * 0.9) {
    issues.push(`Texto demasiado corto: ${analysis.wordCount} palabras (objetivo: ${content.wordCount})`);
  }

  if (analysis.c2VocabularyPercentage < 12) {
    issues.push(`Vocabulario C2 insuficiente: ${analysis.c2VocabularyPercentage}% (mínimo: 12%)`);
  }

  if (analysis.grammarErrors.length > 0) {
    issues.push(`Errores gramaticales detectados: ${analysis.grammarErrors.length}`);
  }

  // Calcular puntuación de calidad
  const qualityScore = calculateQualityScore(analysis);

  // Actualizar en BD
  await prisma.contentPiece.update({
    where: { id: contentId },
    data: {
      qualityScore,
      status: issues.length === 0 && qualityScore >= 8 ? 'APPROVED' : 'IN_REVIEW',
      notes: issues.join(' | ')
    }
  });

  return {
    contentId,
    qualityScore,
    issues,
    analysis
  };
}

// Revisar todo el contenido pendiente
async function reviewAll() {
  const pending = await prisma.contentPiece.findMany({
    where: { status: 'IN_REVIEW' }
  });

  console.log(`Revisando ${pending.length} piezas de contenido...`);

  for (const content of pending) {
    const result = await reviewContent(content.id);
    console.log(`${content.contentId}: Puntuación ${result.qualityScore}/10 - ${result.issues.length} problemas`);
  }
}

reviewAll().catch(console.error);
```

### 3. Herramientas de análisis

```typescript
// lib/text-analysis.ts

import natural from 'natural';
import { C2_VOCABULARY } from './c2-vocabulary';

interface TextAnalysis {
  wordCount: number;
  uniqueWords: number;
  sentenceCount: number;
  avgWordsPerSentence: number;
  c2VocabularyCount: number;
  c2VocabularyPercentage: number;
  c2Terms: string[];
  complexStructures: string[];
  grammarErrors: GrammarError[];
  readabilityScore: number;
  varietyMarkers: string[];
}

export async function analyzeText(
  text: string,
  options: { level: string; expectedWordCount?: number; variety?: string }
): Promise<TextAnalysis> {

  // Tokenización
  const tokenizer = new natural.WordTokenizer();
  const words = tokenizer.tokenize(text.toLowerCase());
  const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);

  // Vocabulario C2
  const c2Terms = words.filter(word => C2_VOCABULARY.includes(word));
  const c2Percentage = (c2Terms.length / words.length) * 100;

  // Estructuras complejas (regex patterns)
  const complexPatterns = [
    /aunque.{10,},(subjuntivo)/gi,
    /no\s+obstante/gi,
    /a\s+tenor\s+de/gi,
    /en\s+virtud\s+de/gi,
    /por\s+ende/gi
  ];

  const complexStructures: string[] = [];
  complexPatterns.forEach(pattern => {
    const matches = text.match(pattern);
    if (matches) complexStructures.push(...matches);
  });

  // Verificar errores gramaticales (simplificado, usar LanguageTool API en producción)
  const grammarErrors = await checkGrammar(text);

  // Marcadores de variedad dialectal
  const varietyMarkers = detectVarietyMarkers(text, options.variety);

  // Puntuación de legibilidad (adaptado para C2)
  const readabilityScore = calculateReadability(text, sentences.length, words.length);

  return {
    wordCount: words.length,
    uniqueWords: new Set(words).size,
    sentenceCount: sentences.length,
    avgWordsPerSentence: words.length / sentences.length,
    c2VocabularyCount: c2Terms.length,
    c2VocabularyPercentage: c2Percentage,
    c2Terms: [...new Set(c2Terms)],
    complexStructures,
    grammarErrors,
    readabilityScore,
    varietyMarkers
  };
}

async function checkGrammar(text: string): Promise<GrammarError[]> {
  // Integración con LanguageTool API
  const response = await fetch('https://api.languagetool.org/v2/check', {
    method: 'POST',
    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
    body: new URLSearchParams({
      text,
      language: 'es',
      level: 'picky' // Más estricto
    })
  });

  const data = await response.json();
  return data.matches.map((match: any) => ({
    message: match.message,
    offset: match.offset,
    length: match.length,
    context: match.context.text
  }));
}
```

---

## Control de Calidad

### Checklist de calidad por tipo

#### Textos:
- [ ] Extensión correcta (±10% del objetivo)
- [ ] Vocabulario C2 ≥ 12% del total
- [ ] Mínimo 3 estructuras complejas por 100 palabras
- [ ] Cero errores gramaticales u ortográficos
- [ ] Variedad dialectal auténtica verificada
- [ ] Sin plagio (Turnitin score < 5%)
- [ ] Contenido culturalmente apropiado
- [ ] Género textual bien definido

#### Audios:
- [ ] Duración correcta (±15 segundos del objetivo)
- [ ] Calidad de audio profesional (sin ruido)
- [ ] Pronunciación clara y natural
- [ ] Velocidad 140-180 palabras/minuto
- [ ] Variedad dialectal auténtica
- [ ] Transcripción precisa (>95% accuracy)
- [ ] Volumen normalizado (-16 LUFS)

#### Gráficos:
- [ ] Resolución mínima 1920x1080px
- [ ] Texto legible (≥14pt)
- [ ] Colores accesibles (WCAG AA)
- [ ] Datos realistas y coherentes
- [ ] Diseño profesional y limpio
- [ ] Fuente indicada
- [ ] Sin errores ortográficos

### Proceso de aprobación

```
1. CREACIÓN (AI-assisted)
   ↓
2. REVISIÓN AUTOMÁTICA (scripts)
   ↓
3. REVISIÓN HUMANA (experto en contenido)
   ↓ (si aprueba)
4. APROBADO → Base de datos
   ↓ (si rechaza)
5. CORRECCIÓN → Volver a paso 2
```

### Roles de revisión

- **Lingüista C2**: Valida nivel, vocabulario y estructuras
- **Nativo de variedad**: Confirma autenticidad dialectal
- **Experto DELE**: Verifica alineación con especificaciones
- **Editor**: Revisa estilo, coherencia y calidad general

---

## Próximos Pasos

1. ✅ Documentación de generador creada
2. **Implementar scripts de generación**: Batch generation con Claude API
3. **Crear pipeline de revisión**: Automatización con LanguageTool + análisis custom
4. **Poblar base de datos de contenido**: Generar lote inicial de 50 textos
5. **Grabar audios piloto**: Contratar 3 locutores (peninsular, mexicano, argentino)
6. **Crear gráficos base**: 10 infografías y 5 gráficos de datos
7. **Validación con experto**: Revisión humana de calidad

---

## Recursos y Presupuesto Estimado

### Costos de producción (para 160-200h de curso C2)

| Recurso | Cantidad | Coste unitario | Total |
|---------|----------|----------------|-------|
| **Textos (AI + revisión)** | 150 textos | €2/texto | €300 |
| **Audios (locutores)** | 60 audios | €80/audio | €4,800 |
| **Gráficos (diseñador)** | 35 gráficos | €25/gráfico | €875 |
| **Revisión lingüística** | 40 horas | €30/hora | €1,200 |
| **APIs (Claude, LanguageTool)** | — | — | €200 |
| **Total estimado** | — | — | **€7,375** |

### Alternativas de bajo coste

- **Textos**: Generación 100% con Claude + auto-revisión (€200)
- **Audios**: ElevenLabs TTS para prototipos (€50/mes)
- **Gráficos**: Canva + templates gratuitos (€0-200)
- **Revisión**: Colaboradores voluntarios o intercambio (€0)

**Total alternativa low-cost**: €450-800

### Timeline estimado

- **Fase 1 - Textos** (4-6 semanas): Generación + revisión de 150 textos
- **Fase 2 - Gráficos** (2-3 semanas): Diseño de 35 gráficos
- **Fase 3 - Audios** (6-8 semanas): Guiones + grabación + post-producción
- **Fase 4 - Escenarios** (2 semanas): Tarjetas y escenarios de interacción
- **Fase 5 - Integración** (2 semanas): Subida a plataforma + metadata

**Total**: 16-21 semanas (4-5 meses)

